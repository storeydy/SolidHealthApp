<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
  <title>Solid Health App</title>
  <script defer="" src="/storeydy.github.io.e31bb0bc.js" type="module"></script>
  <link rel="stylesheet" href="/my-demo.4eccdcf0.css">
<script src="/my-demo.4eccdcf0.js"></script></head>

<body style="background-color: #b0dcff;">
  <div>
    <header style="background-color: #1c93ed; border: 2%; border-color: black;">
      <div class="row">
        <h2 style="padding-left: 40%;">Solid Health App</h2>
        <h4 <="" div="">
    </h4></div></header>
    <section id="login" class="panel">
      <div id="loginButtonDiv" class="row">
        <label id="labelLogin" for="btnLogin">1. Click the button to log into
          <span id="solid_identity_provider">...provided by the JavaScript code...</span>:
        </label>
        <button name="btnLogin" id="btnLogin">Login</button>
      </div>
      <button name="btnLogout" id="btnLogout" class="orange-button" style="display:none; float:right;">Logout</button>
      <p id="labelStatus" class="labelStatus"></p>
    </section>

    <div id="accessingPod" class="podSelector" style="display: none;">
      <form id="accessPodForm">
        <h3> Choose the Solid pod that you would like to access: </h3>
        <div class="row">
          <button id="myPodButton" style="position: inherit; left: 20%; font-size: 15px;"> Access my
            pod</button>
          <div class="row" style="align-content: center;">
            <h3 style="position: inherit; left:35%; max-width: max-content;"> OR</h3>
            <h4 style="position: inherit; left:45%; max-width: max-content;"> The pod belonging to: </h4>
            <input type="url" id="podOwner" placeholder="Enter WebID of Patient pod" size="40" style="position: inherit; left:60%">
            <button id="otherUserPodButton" style="position: inherit; left:65%"> Submit </button>
          </div>
        </div>
      </form>
      <form id="accessHealthDataForm" style="display: none" class="row">
        <h3 style="text-align: center;"> Choose the type of Health Data in the designated pod that you would like to
          access: </h3>
        <input type="button" value="public" class="light-blue-button column-5" id="publicButton" disabled="true">
        <input type="button" value="private" class="light-blue-button column-5" id="privateButton" disabled="true">
        <input type="button" value="GP" class="light-blue-button column-5" id="GPButton" disabled="true">
      </form>
    </div>

    <div id="institutionInformation" class="podSelector" style="display:none">
      <div class="row">
        <h3 id="typeOfAccessedHealthData" class="section-header"></h3>
        <h3 id="ownerOfPod"></h3>
        <br><br>
        <h5 id="editInstitutionInfoLabel" style="display:none">Edit any of the fields below and press the Enter key to
          save changes </h5>
        <div class="row alt-color" style="margin: 1vh; padding: 1vh; border: 2px; border-radius: 10px 10px 10px 10px">
          <h3 id="nameOfInstitution" class="column-2"></h3> <input style="float:right; margin-left: 10%; margin-top: 1%; display:none" type="button" class="white-button-small" id="setNameToEditable" value="Edit">
          <input style="float:right; margin-left: 10%; margin-top: 1%; display: none" type="button" class="red-button-small" id="setNameToReadOnly" value="Cancel">
        </div>
        <div class="row alt-color" style="margin: 1vh; padding: 1vh; border: 2px; border-radius: 10px 10px 10px 10px">
          <h3 id="addressOfInstitution" class="column-2"></h3> <input style="float:right; margin-left: 10%; margin-top: 1%; display:none" type="button" class="white-button-small" id="setAddressToEditable" value="Edit">
          <input style="float:right; margin-left: 10%; margin-top: 1%; display: none" type="button" class="red-button-small" id="setAddressToReadOnly" value="Cancel">
        </div>
        <div class="row alt-color" style="margin: 1vh; padding: 1vh; border: 2px; border-radius: 10px 10px 10px 10px">
          <h3 id="administratorOfInstitution" class="column-2"></h3> <input style="float:right; margin-left: 10%; margin-top: 1%; display:none" type="button" class="white-button-small" id="setAdministratorToEditable" value="Edit">
          <input style="float:right; margin-left: 10%; margin-top: 1%; display: none" type="button" class="red-button-small" id="setAdministratorToReadOnly" value="Cancel">
          <div class="help-tip-left" style="left: 40%; align-items:inherit;" id="administratorTooltip">
            <p>This is the only individual than the pod owner that is able to register appointments in a new
              department
              on behalf of the patient. <br> <br> By specifying the WebID of the doctor conducting an appointment,
              they
              will also be able to grant permissions to the doctor to view, modify and change access to
              records within a given healthcare department.
            </p>
          </div>
        </div>
        <button id="cancelSessionWithPodButton" class="white-button column-5" style="margin: 2%;"> Cancel session with
          current pod owner
        </button>
        <button type="submit" class="white-button column-5" id="registerNewMedicalInstitutionButton" disabled="true" style="margin: 2%;" title="This action can currently only be performed by the pod owner">
          Register new medical institution</button>
        <button type="submit" class="white-button column-5" id="registerNewAppointmentButton" style="margin: 2%;" disabled="true" title="This action can currently only be performed by the pod owner or institution administrator">
          Register new appointment</button>
        <button type="submit" class="white-button column-5" id="accessMedicalRecordsButton" style="margin: 2%;">
          Access medical records </button>
      </div>
      <div class="row">
        <button type="submit" class="white-button column-5" id="uploadMedicalRecordsButton" style="margin: 2%;">
          Upload medical records </button>
        <button class="white-button column-5" id="initiateInsuranceRequestButton" style="margin: 2%;" title="This action can currently only be performed by the pod owner" disabled="true">Make insurance
          request</button>

        <button class="white-button column-5" id="viewPodDiagramButton" style="margin: 2%;">View pod diagram</button>
      </div>
    </div>

    <div id="noInstitutionInformation" style="display:none">
      <form id="noInstitutionInformationForm">
        <h2> There is currently no registered medical institution in your pod, click below to add one </h2>
        <button type="submit"> Register new medical institution </button>
      </form>
    </div>

    <div id="registerNewMedicalInstitution" style="display:none" class="panel">
      <form id="newMedicalInstitutionForm">
        <h2 class="section-header" style="text-align: center; margin-top: 5%;"> Register new medical institution </h2>
        <div class="row newField">
          <label id="institutionTypeLabel"> Type of medical institution: </label>
          <select name="institutionType" id="institutionType">
            <option value="public"> Public </option>
            <option value="private"> Private </option>
            <option value="GP">General Practitioner (GP)</option>
          </select>
        </div>
        <div class="row newField">
          <label id="institutionNameLabel"> Name of medical institution: </label>
          <input type="text" id="institutionName" placeholder="Enter name of new medical institution" size="70" required="">
        </div>
        <div class="row newField">
          <label id="institutionAddressLabel"> Address of medical institution: </label>
          <input type="text" id="institutionAddress" placeholder="Enter address of new medical institution" size="70" required="">
        </div>
        <div class="row newField">
          <label id="institutionSysAdminLabel"> WebID of medical institution administrator (optional): </label>
          <input type="url" id="institutionSysAdmin" placeholder="Enter webID of medical institution administrator" size="70" value="">
          <p><b> Note: The individual associated with this WebID will be able to organise appointments on your behalf
              and grant other users access to your health records, so it is important to ensure that the correct WebID
              is entered </b></p>
        </div>
        <button type="submit" class="green-button"> Save institution details to pod </button>
        <button type="reset" id="cancelRegisterNewInsitutionButton" class="red-button"> Cancel changes </button>
      </form>
    </div>

    <div id="uploadNewAppointmentDetails" class="panel" style="display: none; height: 140%">
      <button id="returnFromUploadingAppointment" class="red-button" style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
      <h2 style="text-align: center;"> Upload new appointment details </h2>
      <div class="row">
        <label class="column-4" style="font-size: 2vh;"> Department of appointment: </label>
        <div class="help-tip-right" style="left: 20%;" id="administratorTooltip">
          <!-- <div class="help-tip" style="position: inherit"> -->
          <p>Only pod owner or institution administrator can upload details of an appointment in a department where no
            records previously exist <br> <br>
          </p>
        </div>
        <form class="column-4" id="selectedDepartmentForm">
          <div class="dropdown">
            <button type="submit" class="dropbtn" id="departmentDropdownButton">Select a department</button>
            <div id="myDropdown" class="dropdown-content">
              <input type="text" placeholder="Search.." id="selectedAppointmentDepartmentDropdown" onkeyup="filterFunction()">
            </div>
          </div>
        </form>
      </div>
      <form id="saveNewAppointmentDetailsForm">
        <div class="row">
          <label class="column-6"> Time of appointment: </label>
          <input class="column-6" type="text" placeholder="hh:mm (24hr)" id="newAppointmentTime" required="" pattern="[0-9][0-9]:[0-5][0-9]" minlength="5" maxlength="5">
          <input class="column-6" style="float:right" type="text" placeholder="dd/mm/yy" id="newAppointmentDate" required="" pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" minlength="8" maxlength="8">
          <label class="column-6" style="float:right"> Date of appointment: </label>
        </div>
        <div class="row">
          <label class="column-4"> WebID of Health worker conducting appointment: </label>
          <div class="help-tip-left" style="left: 300px">
            <p>This individual will be able to view and make changes to all records held in the selected appointment
              department. This is for the purpose of uploading any general records, diagnoses or prescriptions that came
              from the appointment. <br> <br> They will also be able to grant the same permissions to others, for the
              purpose of
              granting
              access to Pharmacists who may have to fill out a prescription that was created after the appointment.
              <br><br>It
              is very important that the WebID entered here is the WebID of the trusted health worker.
            </p>
          </div>
          <input class="column-4" type="url" placeholder="Enter Doctor's WebID" id="newAppointmentDoctor" required="">
          <textarea class="column-6" style="float:right; resize: none;" cols="40" rows="5" placeholder="Enter any notes relevant to the appointment" id="newAppointmentNotes"></textarea>
          <label class="column-6" style="float:right"> Notes: </label>
        </div>
        <button type="submit" class="green-button" id="saveAppointmentDetailsButton"> Save Appointment Details to pod
        </button>
      </form>
    </div>

    <div id="accessingRecordsDiv" class="panel" style="display:none">
      <button id="returnFromAccessingRecords" class="red-button" style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go
        back </button>
      <form id="departmentSelectionForm">
        <h2 style="text-align: center; margin-top: 5%;"> Select a department to access record types within that
          department, or manage the access to it </h2>
      </form>
      <button id="viewAccessButton" class="light-blue-button" style="width: 200px"> Manage access to selected dataset
      </button>

    </div>
  </div>

  <div id="uploadNewMedicalRecordDiv" class="panel" style="display:none">
    <button id="returnFromUploadingMedicalRecord" class="red-button" style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
    <h2 style="text-align: center;">Upload new medical record to selected user's pod </h2>
    <div id="medicalRecordTypeSelection">
      <div class="row">
        <h5> Select a record type to upload. Hover over options for more details. </h5>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Diagnosis" id="diagnosisCheckbox" onclick="disableOtherCheckboxes('recordCheckbox', 'prescriptionCheckbox')">
          <label title="Medical record containing details of a diagnosis that has been reached from test results" for="diagnosisCheckbox" style="margin-right: 2%;"> Diagnosis </label>
        </div>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Prescription" id="prescriptionCheckbox" onclick="disableOtherCheckboxes('diagnosisCheckbox', 'recordCheckbox')">
          <label title="Medical record containing details of prescribed medication for the owner of the currently accessed pod" for="prescriptionCheckbox" style="margin-right: 2%;"> Prescription </label>
        </div>
        <div class="column-6 selection-div">
          <input type="checkbox" name="test" value="Record" id="recordCheckbox" onclick="disableOtherCheckboxes('diagnosisCheckbox', 'prescriptionCheckbox')">
          <label title="Medical record containing details of notes from a recent appointment or other encounter with a Health Worker" for="recordCheckbox" style="margin-right: 2%;"> General Record </label>
        </div>
      </div>
      <button id="continueWithSelectedRecordTypeButton" class="light-blue-button"> Continue </button>
    </div>
    <form id="newGeneralRecordForm">
      <div id="createNewGeneralRecordDiv" style="display:none">
        <h5> Record type: <u>General Record</u></h5>
        <div class="row" id="newGeneralRecordDateAndDepartment">
          <label class="column-6">Date of record: </label>
          <input class="column-6" placeholder="dd/mm/yy" required="" pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" minlength="8" maxlength="8" id="generalRecordDate">
          <div id="newRecordDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
          <div class="help-tip-left">
            <p>Only departments in which you have previously recorded an appointment will be shown here. Register
              details of a new appointment to allow the creation of records in a new department.</p>
          </div>
        </div>
        <div class="row">
          <label class="column-6">Title of record: </label>
          <input class="column-3" placeholder="Enter a title" required="" id="generalRecordTitle">
        </div>
        <div class="row">
          <label class="column-6"> Description of record: </label>
          <textarea class="column-3" style="resize:none" required="" placeholder="Enter a description" cols="80" rows="10" id="newGeneralRecordDescription"></textarea>
        </div>
        <button type="submit" class="green-button" id="saveGeneralRecordDetailsButton"> Save general record details to
          pod </button>
      </div>
    </form>
    <form id="newPrescriptionForm">
      <div id="createNewPrescriptionDiv" style="display:none">
        <h5> Record type: <u>Prescription</u></h5>
        <div class="row" id="newPrescriptionDateAndDepartment">
          <label class="column-6">Title of prescription: </label>
          <input class="column-3" placeholder="Enter a title" required="" id="prescriptionTitle">
          <div id="newPrescriptionDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
          <div class="help-tip-left">
            <p>Only departments in which you have previously recorded an appointment will be shown here. Register
              details of a new appointment to allow the creation of records in a new department.</p>
          </div>
        </div>
        <div class="row">
          <label class="column-6">Start date of prescription: </label>
          <input class="column-6" placeholder="dd/mm/yy" required="" pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" minlength="8" maxlength="8" id="prescriptionStartDate">
          <input style="float:right" class="column-6" placeholder="dd/mm/yy" required="" pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" minlength="8" maxlength="8" id="prescriptionEndDate">
          <label style="float:right" class="column-6">End date of prescription: </label>
        </div>
        <div class="row">
          <label class="column-6"> Description of prescription: </label>
          <textarea class="column-3" style="resize:none" required="" placeholder="Enter a description" cols="80" rows="10" id="newPrescriptionDescription"></textarea>
          <input style="float:right" type="url" value="" class="column-6" placeholder="Enter a pharmacist WebID" id="prescriptionPharmacist">
          <label style="float:right" class="column-6">Pharmacist to fill prescription (optional): </label>
        </div>
        <button type="submit" class="green-button" id="savePrescriptionDetailsButton"> Save prescription details to
          pod </button>
      </div>
    </form>
    <form id="newDiagnosisForm">
      <div id="createNewDiagnosisDiv" style="display:none">
        <h5> Record type: <u>Diagnosis</u></h5>
        <div class="row" id="newDiagnosisDateAndDepartment">
          <label class="column-6">Title of diagnosis: </label>
          <input class="column-3" placeholder="Enter a title" required="" id="diagnosisTitle">
          <div id="newDiagnosisDepartmentPlaceholderDiv" class="column-6" style="float:right"></div>
          <label class="column-6" style="float:right"> Department: </label>
          <div class="help-tip-left">
            <p>Only departments in which you have previously recorded an appointment will be shown here. Register
              details of a new appointment to allow the creation of records in a new department.</p>
          </div>
        </div>
        <div class="row">
          <label class="column-6">Date of diagnosis: </label>
          <input class="column-6" placeholder="dd/mm/yy" required="" pattern="[0-9][0-9]/[0-1][0-9]/[0-9][0-9]" minlength="8" maxlength="8" id="diagnosisDate">
        </div>
        <div class="row">
          <label class="column-6"> Description of diagnosis: </label>
          <textarea class="column-3" style="resize:none" required="" placeholder="Enter a description" cols="80" rows="10" id="newDiagnosisDescription"></textarea>
        </div>
        <button type="submit" class="green-button" id="saveDiagnosisDetailsButton"> Save Diagnosis details to
          pod </button>
      </div>
    </form>
  </div>

  <div id="insuranceDiv" class="panel" style="display: none">
    <button id="returnFromInsurance" class="red-button" style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
    <h2 class="section-header" style="text-align: center; margin-top: 5%;">Share medical records for health/life
      insurance</h2>
    <h4>In order to get a quote for life insurance, insurance companies must be aware of any ongoing health conditions
      of the insured. <br><br>
      This is done by a process called underwriting, and it determines how much of a risk the individual is to cover.
      <br><br>
      By using this feature you will be providing all of the required data to a specified insurer, including any
      diagnoses dated in the last 5 years from the following departments:
    </h4>
    <ul>
      <li>Cardiology</li>
      <li>Oncology</li>
      <li>Haematology</li>
      <li>Oncology</li>
      <li>Psychiatry</li>
      <li>Rheumatology</li>
    </ul>
    <h4><br><br>Enter below the WebID of the insurer, which will allow them to view these records that are stored in
      your pod. </h4>
    <input type="url" placeholder="Insurer WebID" id="insurerWebID">
    <button id="submitInsuranceRequestButton" style="margin-left:70px" class="green-button">Submit </button>
  </div>

  <div id="podDiagramDiv" class="panel" style="display: none">
    <button id="returnFromPodDiagram" class="red-button" style="float: right; position: inherit; align-self: flex-end; top: 5%"> Go back </button>
    <h3 class="section-header" style="margin-top: 5%;">Overall pod structure</h3>
    <h1 style="font-size: medium;">In order to use this application, users make use of the <a href="https://solidproject.org/TR/protocol">Solid specification</a>
      in order to store and access medical records in individual patient's pods, which can be thought of as personal
      data stores.</h1>
    <h1 style="font-size: medium;">All of the data used in this application is stored in the pod of the individual that
      was specified at the initial welcome screen after logging in. This data is set to private by default, meaning that
      explicit access must be granted to view or update any of it. It is also entirely isolated from all other data held
      in the pod.</h1>
    <h1 style="font-size: medium">The owner of this pod is <a href="" id="podOwnerUrl"></a>, and you have been granted
      access to health data stored in their pod for the types shown in green: </h1>
    <div id="diagramLegend">
      <div class="row">
        <div class="column-4">
          <div class="container-box"> </div>
          <a style="float:left; margin-top: 6%;"> Container </a>
        </div>
        <div class="column-4">
          <div class="dataset-box"> </div>
          <a style="float:left; margin-top: 6%;"> Dataset </a>
        </div>
        <div class="column-4">
          <div class="thing-box"> </div>
          <a style="float:left; margin-top: 6%;"> Thing </a>
        </div>
      </div>
    </div>
    <div id="createdHealthDataTypes" class="row">
      <div id="publicHealthDataType" class="column-4 diagram-entity">Public</div>
      <div id="privateHealthDataType" class="column-4 diagram-entity">Private</div>
      <div id="GPHealthDataType" class="column-4 diagram-entity">General Practioner (GP)</div>
    </div>
  </div>



  <script type="module">
    function disableOtherCheckboxes(checkboxToDisable1, checkboxToDisable2) {
      document.getElementById(checkboxToDisable1).disabled = !(document.getElementById(checkboxToDisable1).disabled)
      document.getElementById(checkboxToDisable2).disabled = !(document.getElementById(checkboxToDisable2).disabled)
    }
    /* When the user clicks on the button,
    toggle between hiding and showing the dropdown content */
    // function myFunction() {
    //   document.getElementById("myDropdown").classList.toggle("show");
    // }

    function filterFunction() {
      var input, filter, ul, li, a, i;
      input = document.getElementById("selectedAppointmentDepartmentDropdown");
      filter = input.value.toUpperCase();
      div = document.getElementById("myDropdown");
      a = div.getElementsByTagName("a");
      for (i = 0; i < a.length; i++) {
        txtValue = a[i].textContent || a[i].innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          a[i].style.display = "";
        } else {
          a[i].style.display = "none";
        }
      }
    }
  </script>
</body>

</html>